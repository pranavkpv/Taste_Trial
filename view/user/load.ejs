<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Tate Trial - Delicious Food Delivered To You</title>
   <link rel="stylesheet" href="/login.css">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
   <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.28/dist/sweetalert2.min.css" rel="stylesheet">

   <style>
      :root {
         --primary: #ff4757;
         --secondary: #2ed573;
         --dark: #2f3542;
      }

      /* Header Styles */
      .navbar {
         background: white;
         box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
         padding: 1rem 0;
      }

      .navbar-brand {
         font-size: 1.5rem;
         font-weight: 700;
         color: var(--primary);
      }

      .nav-link {
         color: var(--dark);
         font-weight: 500;
         margin: 0 1rem;
         transition: color 0.3s ease;
      }

      .nav-link:hover {
         color: var(--primary);
      }

      .auth-buttons .btn {
         border-radius: 25px;
         padding: 0.5rem 1.5rem;
         margin-left: 1rem;
      }

      /* Hero Section */
      .hero {
         background: linear-gradient(135deg, rgba(255, 71, 87, 0.1) 0%, rgba(255, 107, 129, 0.1) 100%);
         padding: 5rem 0;
         margin-bottom: 4rem;
      }

      .hero h1 {
         font-size: 3.5rem;
         font-weight: 700;
         margin-bottom: 1.5rem;
         color: var(--dark);
      }

      .hero p {
         font-size: 1.2rem;
         color: #666;
         margin-bottom: 2rem;
      }

      .hero-img {
         max-width: 100%;
         height: auto;
         border-radius: 20px;
         box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }

      /* Section Styles */
      .section-title {
         text-align: center;
         margin-bottom: 3rem;
         position: relative;
         padding-bottom: 1rem;
      }

      .section-title::after {
         content: '';
         position: absolute;
         bottom: 0;
         left: 50%;
         transform: translateX(-50%);
         width: 80px;
         height: 3px;
         background: var(--primary);
      }

      /* Category Card */
      .category-card {
         background: white;
         border-radius: 15px;
         overflow: hidden;
         box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
         transition: transform 0.3s ease;
         margin-bottom: 2rem;
         text-align: center;
         padding: 1.5rem;
         cursor: pointer;
      }

      .category-card:hover {
         transform: translateY(-5px);
      }

      .category-icon {
         font-size: 2.5rem;
         color: var(--primary);
         margin-bottom: 1rem;
      }

      /* Food Card */
      .food-card {
         background: white;
         border-radius: 15px;
         overflow: hidden;
         box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
         transition: transform 0.3s ease;
         margin-bottom: 2rem;
      }

      .food-card:hover {
         transform: translateY(-5px);
      }

      .food-img {
         height: 200px;
         width: 100%;
         object-fit: cover;
      }

      .food-details {
         padding: 1.5rem;
      }

      .food-title {
         font-size: 1.2rem;
         font-weight: 600;
         margin-bottom: 0.5rem;
      }

      .food-price {
         color: var(--primary);
         font-weight: 600;
         font-size: 1.1rem;
      }

      /* Hotel Card */
      .hotel-card {
         background: white;
         border-radius: 15px;
         overflow: hidden;
         box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
         transition: transform 0.3s ease;
         margin-bottom: 2rem;
      }

      .hotel-card:hover {
         transform: translateY(-5px);
      }

      .hotel-img {
         height: 200px;
         width: 100%;
         object-fit: cover;
      }

      .hotel-details {
         padding: 1.5rem;
      }

      .hotel-title {
         font-size: 1.2rem;
         font-weight: 600;
         margin-bottom: 0.5rem;
      }

      .rating {
         color: #ffd700;
         margin-right: 0.5rem;
      }

      /* Search Section */
      .search-section {
         background: var(--primary);
         padding: 4rem 0;
         margin: 4rem 0;
         color: white;
         text-align: center;
      }

      .search-box {
         max-width: 600px;
         margin: 2rem auto;
         position: relative;
      }

      .search-box input {
         width: 100%;
         padding: 1rem 1.5rem;
         border-radius: 30px;
         border: none;
         font-size: 1.1rem;
      }

      .search-box button {
         position: absolute;
         right: 5px;
         top: 5px;
         padding: 0.7rem 1.5rem;
         border-radius: 25px;
         background: var(--primary);
         color: white;
         border: none;
      }

      /* Footer */
      .footer {
         background: var(--dark);
         color: white;
         padding: 4rem 0 2rem;
         margin-top: 4rem;
      }

      .footer-title {
         font-size: 1.2rem;
         font-weight: 600;
         margin-bottom: 1.5rem;
      }

      .footer-links {
         list-style: none;
         padding: 0;
      }

      .footer-links li {
         margin-bottom: 0.8rem;
      }

      .footer-links a {
         color: #ddd;
         text-decoration: none;
         transition: color 0.3s ease;
      }

      .footer-links a:hover {
         color: var(--primary);
      }

      /* Top Badge */
      .top-badge {
         position: absolute;
         top: 10px;
         right: 10px;
         background: var(--primary);
         color: white;
         padding: 0.3rem 0.8rem;
         border-radius: 15px;
         font-size: 0.8rem;
         font-weight: 600;
      }

      /* Scroll to Top */
      .scroll-top {
         position: fixed;
         bottom: 20px;
         right: 20px;
         width: 40px;
         height: 40px;
         background: var(--primary);
         color: white;
         border-radius: 50%;
         display: flex;
         align-items: center;
         justify-content: center;
         cursor: pointer;
         opacity: 0;
         transition: opacity 0.3s ease;
      }

      .scroll-top.show {
         opacity: 1;
      }

      .modal-content {
         background: rgba(255, 255, 255, 0.9);
         backdrop-filter: blur(10px);
      }

      .form-control {
         border: 1px solid #ddd;
         transition: all 0.3s ease-in-out;
      }

      .form-control:focus {
         border-color: #007bff;
         box-shadow: 0 0 10px rgba(0, 123, 255, 0.2);
      }

      .btn-primary:hover {
         background-color: #0056b3;
      }

      .eye-icon i {
         font-size: 1.2rem;
      }
   </style>
</head>

<body>
   <!-- Header -->
   <nav class="navbar navbar-expand-lg sticky-top">
      <div class="container">
         <a class="navbar-brand" href="#">
            <i class="fas fa-utensils me-2"></i>Taste Trial
         </a>
         <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
               <li class="nav-item">
                  <a class="nav-link" href="#home">Home</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#categories">Categories</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#foods">Foods</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link" href="#hotels">Hotels</a>
               </li>
            </ul>
            <div class="auth-buttons">
               <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#loginModal">
                  Login
               </button>
               <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#signupModal">
                  Sign Up
               </button>
            </div>
         </div>
      </div>
   </nav>

   <!-- Hero Section -->
   <section class="hero" id="home">
      <div class="container">
         <div class="row align-items-center">
            <div class="col-lg-6">
               <h1>Delicious Food<br>Delivered To You</h1>
               <p>Choose from thousands of restaurants and get your favorite food delivered to your doorstep.</p>
               <button class="btn btn-primary btn-lg" >Order Now</button>
            </div>
            <div class="col-lg-6">
               <img src="/uploads/load.jpg" alt="Hero Image" class="hero-img">
            </div>
         </div>
      </div>
   </section>

   <!-- Categories Section -->
   <section class="py-5" id="categories">
      <div class="container">
         <h2 class="section-title">Popular Categories</h2>
         <div class="row">
            <!-- Top 10 Categories -->
           <% categoryOrder.forEach(element => { %>
            <div class="col-md-3 col-sm-6">
               <div class="category-card">
                  <div class="category-icon">
                     <i class="fas fa-hamburger"></i>
                  </div>
                  <h4><%= element.categoryname %></h4>
                  <p><%= element.count %>+ items</p>
               </div>
            </div>
           <% }) %>
         </div>
      </div>
   </section>

   <!-- Search Section -->
   <section class="search-section">
      <div class="container">
         <h2>Search Your Favorite Food</h2>
         <div class="search-box">
            <input type="text" id="searchforFood" placeholder="Search for food ...">
            <button id="search">Search</button>
         </div>
      </div>
   </section>

   <!-- Top Foods Section -->
   <section class="py-5" id="foods">
      <div class="container">
         <h2 class="section-title">Top 10 Foods</h2>
         <div class="row">
            <!-- Top 10 Foods -->
           <% foodOrder.forEach(element => { %>
            <div class="col-md-3 col-sm-6">
               <div class="food-card">
                  <span class="top-badge">Top Rated</span>
                  <img src="<%= element.images %>" alt="Food" class="food-img">
                  <div class="food-details">
                     <h4 class="food-title"><%= element.foodname %></h4>
                     <div class="d-flex justify-content-between align-items-center">
                     </div>
                  </div>
               </div>
            </div>
           <% }) %>
         </div>
      </div>
   </section>

   <!-- Top Hotels Section -->
   <section class="py-5" id="hotels">
      <div class="container">
         <h2 class="section-title">Featured Hotels</h2>
         <div class="row">
            <!-- Top 10 Hotels -->
           <% hotelOrder.forEach(element => { %>
            <div class="col-md-3 col-sm-6">
               <div class="hotel-card">
                  <span class="top-badge">Featured</span>
                  <img src="<%= element.images %>" alt="Hotel" class="hotel-img">
                  <div class="hotel-details">
                     <h4 class="hotel-title"><%= element.hotelname %></h4>
                     <div class="d-flex justify-content-between align-items-center">
                        <span><%= element.address %></span>
                     </div>
                  </div>
               </div>
            </div>
           <% }) %>
         </div>
      </div>
   </section>

   <!-- Footer -->
   <footer class="footer">
      <div class="container">
         <div class="row">
            <div class="col-md-3">
               <h5 class="footer-title">Taste Trial</h5>
               <p>Order your favorite food from the best restaurants in town.</p>
            </div>
            <div class="col-md-3">
               <h5 class="footer-title">Quick Links</h5>
               <ul class="footer-links">
                  <li><a href="#home">Home</a></li>
                  <li><a href="#categories">Categories</a></li>
                  <li><a href="#foods">Foods</a></li>
                  <li><a href="#hotels">Hotels</a></li>
               </ul>
            </div>
            <div class="col-md-3">
               <h5 class="footer-title">Contact Us</h5>
               <ul class="footer-links">
                  <li><i class="fas fa-phone me-2"></i> +1234567890</li>
                  <li><i class="fas fa-envelope me-2"></i> info@foodiehub.com</li>
                  <li><i class="fas fa-map-marker-alt me-2"></i> 123 Street, City</li>
               </ul>
            </div>
            <div class="col-md-3">
               <h5 class="footer-title">Follow Us</h5>
               <div class="d-flex gap-3">
                  <a href="#" class="text-white"><i class="fab fa-facebook fa-lg"></i></a>
                  <a href="#" class="text-white"><i class="fab fa-twitter fa-lg"></i></a>
                  <a href="#" class="text-white"><i class="fab fa-instagram fa-lg"></i></a>
                  <a href="#" class="text-white"><i class="fab fa-youtube fa-lg"></i></a>
               </div>
            </div>
         </div>
         <hr class="mt-4 mb-3 border-light">
         <div class="text-center">
            <p class="mb-0">&copy; 2025 FoodieHub. All rights reserved.</p>
         </div>
      </div>
   </footer>

   <!-- Scroll to Top Button -->
   <div class="scroll-top">
      <i class="fas fa-arrow-up"></i>
   </div>

   <!-- Login Modal -->
   <div class="modal fade" id="loginModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
         <div class="modal-content p-4 w-100">
            <section class="ftco-section">
               <div class="container">
                  <div class="row justify-content-center">
                     <div class="">
                        <div class="login-wrap p-4 p-md-5">
                           <div class="icon d-flex align-items-center justify-content-center mb-3 p-5">
                              <i class="fa fa-user fa-2x text-white"></i>
                           </div>

                           <form class="login-form" autocomplete="off" id="loginForm">
                              <p class="text-center text-danger" id="existUser"></p>
                              <!-- Hidden Fields for Autocomplete Fix -->
                              <input type="text" style="display: none;" autocomplete="username">
                              <input type="password" style="display: none;" autocomplete="current-password">

                              <!-- Email Field -->
                              <div class="form-group mb-3">
                                 <input type="text" id="logemail" class="form-control rounded" placeholder="User Email"
                                    name="email" autocomplete="off">
                              </div>
                              <p id="logemailError" class="text-danger"></p>

                              <!-- Password Field -->
                              <div class="form-group mb-3">
                                 <input type="password" id="logpassword" class="form-control rounded"
                                    placeholder="Password" name="password" autocomplete="off">
                              </div>
                              <p id="logpasswordError" class="text-danger"></p>


                              <!-- Forgot Password -->
                              <div class="d-flex justify-content-between align-items-center mb-3">
                                 <a href="/user/emailverification" class="text-decoration-none">Forgot Password?</a>
                              </div>

                              <!-- Login Button -->
                              <div class="form-group text-center">
                                 <button type="submit" class="btn btn-primary w-100 py-2"
                                    id="liveToastBtn">Login</button>
                              </div>

                              <!-- OR Divider -->
                              <div class="text-center my-3">
                                 <p class="mb-1">Or</p>
                              </div>
                           </form>
                           <div class="form-group text-center">
                              <button class="btn btn-danger w-100 py-2" onclick="location.href='/user/auth/google'">
                                 <i class="fab fa-google me-2"></i> Login with Google
                              </button>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </section>
         </div>
      </div>
   </div>



   <!-- Signup Modal -->
   <div class="modal fade" id="signupModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
         <div class="modal-content shadow-lg border-0 rounded-4">
            <div class="modal-body p-4">
               <div class="icon d-flex align-items-center justify-content-center mb-3 p-5"
                  style="width: 80px;height: 80px;background: #8D448B;border-radius: 50%;font-size: 30px;margin: 0 auto;">
                  <i class="fa fa-user fa-2x text-white"></i>
               </div>
               <form id="signUpform">
                  <p class="text-danger text-center" id="noMatch"></p>
                  <div class="mb-3">
                     <input type="text" class="form-control rounded-pill shadow-sm p-3" placeholder="First Name"
                        name="firstname" id="firstname">
                  </div>
                  <p class="text-danger" id="firsterror"></p>

                  <div class="mb-3">
                     <input type="text" class="form-control rounded-pill shadow-sm p-3" placeholder="Last Name"
                        name="lastname" id="lastname">
                  </div>
                  <p class="text-danger" id="lasterror"></p>


                  <div class="mb-3">
                     <input type="text" class="form-control rounded-pill shadow-sm p-3" placeholder="Phone Number"
                        name="phonenumber" id="phonenumber">
                  </div>
                  <p class="text-danger" id="phoneError"></p>


                  <input type="text" name="hiddenemail" style="display: none;" autocomplete="username">
                  <input type="password" name="hiddenpassword" style="display: none;" autocomplete="current-password">

                  <div class="mb-3">
                     <input type="email" class="form-control rounded-pill shadow-sm p-3" placeholder="Email Address"
                        name="email" id="email">
                  </div>
                  <p id="emailError" class="text-danger"></p>

                  <div class="mb-3 position-relative">
                     <input type="password" class="form-control rounded-pill shadow-sm p-3 pe-5"
                        placeholder="Enter Password" name="password" id="password">
                     <span id="togglePassword" class="eye-icon position-absolute top-50 end-0 translate-middle-y me-3"
                        style="cursor: pointer;">
                        <i class="fa fa-eye-slash text-secondary"></i>
                     </span>
                  </div>
                  <p id="passwordError" class="text-danger"></p>

                  <div class="mb-3">
                     <input type="password" class="form-control rounded-pill shadow-sm p-3"
                        placeholder="Confirm Password" name="confirmpassword" id="confirmpassword">
                  </div>
                  <p id="confirmpasswordError" class="text-danger"></p>

                  <div class="d-grid">
                     <button type="submit" class="btn btn-primary rounded-pill shadow-sm py-3 fw-bold">Generate
                        OTP</button>
                  </div>
               </form>
            </div>
         </div>
      </div>
   </div>

   






   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

   <% if (successsavemessage && successsavemessage.length>0) { %>
      <script>
         Swal.fire({
            title: "<%= successsavemessage %>",
            icon: "success"
         });
      </script>
      <% } %>


      <% if (notExist && notExist.length>0) { %>
         <script>
            Swal.fire({
               title: "<%= notExist %>",
               icon: "error"
            });
         </script>
         <% } %>

   <script>
      // Scroll to Top Button
      const scrollTop = document.querySelector('.scroll-top');

      window.addEventListener('scroll', () => {
         if (window.pageYOffset > 200) {
            scrollTop.classList.add('show');
         } else {
            scrollTop.classList.remove('show');
         }
      });

      scrollTop.addEventListener('click', () => {
         window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // Smooth Scroll for Navigation Links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
         anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
               target.scrollIntoView({
                  behavior: 'smooth',
                  block: 'start'
               });
            }
         });
      });




      // Add animation on scroll
      const animateOnScroll = () => {
         const elements = document.querySelectorAll('.category-card, .food-card, .hotel-card');
         elements.forEach(element => {
            const elementTop = element.getBoundingClientRect().top;
            const elementBottom = element.getBoundingClientRect().bottom;

            if (elementTop < window.innerHeight && elementBottom > 0) {
               element.style.opacity = '1';
               element.style.transform = 'translateY(0)';
            }
         });
      };

      window.addEventListener('scroll', animateOnScroll);
      window.addEventListener('load', animateOnScroll);

      // Initialize tooltips
      const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
      const tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
         return new bootstrap.Tooltip(tooltipTriggerEl);
      });

      // Search functionality
      const searchInput = document.querySelector('.search-box input');
      searchInput.addEventListener('input', function () {
         // Add your search logic here
         console.log('Searching for:', this.value);
      });


      document.getElementById("togglePassword").addEventListener("click", function () {
         let passwordInput = document.getElementById("password");
         let icon = this.querySelector("i");
         if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
         } else {
            passwordInput.type = "password";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
         }
      });


      document.getElementById('loginForm').addEventListener('submit', async function (e) {
         e.preventDefault();
         document.getElementById('logemailError').textContent = '';
         document.getElementById('logpasswordError').textContent = '';
         document.getElementById('existUser').textContent = '';

         const loginEmail = document.getElementById('logemail').value;
         const loginPassword = document.getElementById('logpassword').value;

         // Send a POST request to the server
         const response = await fetch('/user/login', {
            method: 'POST',
            headers: {
               'Content-Type': 'application/json',
            },
            body: JSON.stringify({ email: loginEmail, password: loginPassword })
         });

         const data = await response.json();
         if (data.messageEmail) {
            document.getElementById('logemailError').textContent = data.messageEmail;
         }

         if (data.messagePassword) {
            document.getElementById('logpasswordError').textContent = data.messagePassword;
         }

         if (data.existMessage) {
            document.getElementById('existUser').textContent = data.existMessage
         }
         if (data.successMessage) {
            Swal.fire({
               title: data.successMessage,
               icon: "success",
               draggable: true
            }).then((result) => {
               if (result.isConfirmed) {
                  window.location.href = "/user/home";
               }
            });

         }
      });

      document.getElementById('signUpform').addEventListener('submit', async function (event) {
         event.preventDefault(); // Prevents form from refreshing the page
         document.getElementById('confirmpasswordError').innerText = "";
         document.getElementById("emailError").innerText = "";
         document.getElementById("passwordError").innerText = "";
         document.getElementById("phoneError").innerText = "";
         document.getElementById("lasterror").innerText = "";
         document.getElementById("firsterror").innerText = "";
         document.getElementById('noMatch').innerText = "";








         const firstName = document.getElementById('firstname').value;
         const lastName = document.getElementById('lastname').value;
         const email = document.getElementById('email').value;
         const phonenumber = document.getElementById('phonenumber').value;
         const password = document.getElementById('password').value;
         const confirmPassword = document.getElementById('confirmpassword').value;

         const response = await fetch('/user/verifyOTP', {
            method: "POST",
            headers: {
               "Content-Type": "application/json"
            },
            body: JSON.stringify({
               firstName: firstName,
               lastName: lastName,
               email: email,
               phonenumber: phonenumber,
               password: password,
               confirmPassword: confirmPassword
            })
         });

         const data = await response.json();
         console.log(data)

         if (data.noFirst) {
            document.getElementById("firsterror").innerText = data.noFirst;
         }
         if (data.noLast) {
            document.getElementById("lasterror").innerText = data.noLast;
         }
         if (data.nophone) {
            document.getElementById("phoneError").innerText = data.nophone;
         }
         if (data.nopassword) {
            document.getElementById("passwordError").innerText = data.nopassword;
         }
         if (data.noemail) {
            document.getElementById("emailError").innerText = data.noemail;
         }
         if (data.noconfirm) {
            document.getElementById('confirmpasswordError').innerText = data.noconfirm
         }
         if (data.nomatch) {
            document.getElementById('noMatch').innerText = data.nomatch
         }
         if (data.condition) {
            document.getElementById('noMatch').innerText = data.condition
         }
         if (data.conditionPhone) {
            document.getElementById("phoneError").innerText = data.conditionPhone;
         }
         if (data.exist) {
            document.getElementById('noMatch').innerText = data.exist
         }
         if (data.redirect) {
            window.location.href = data.redirect; 
            return;
         }
      });

    document.getElementById('search').addEventListener('click',async function(){
      const searchforFood=document.getElementById('searchforFood').value
      window.location.href=`/user/load?search=${searchforFood}`
    })
    







   </script>
</body>

</html>