<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Tate Trial - Delicious Food Delivered To You</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
   <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.28/dist/sweetalert2.min.css" rel="stylesheet">
</head>

<body>
   <!-- Header -->
   <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm sticky-top py-3">
      <div class="container">
         <a class="navbar-brand text-danger fw-bold fs-2" href="#">
            <i class="fas fa-utensils me-2"></i>
            Taste Trial
         </a>
         <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
         </button>
         <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav mx-auto">
               <li class="nav-item">
                  <a class="nav-link fw-semibold text-dark px-3" href="#home">Home</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link fw-semibold text-dark px-3" href="#categories">Categories</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link fw-semibold text-dark px-3" href="#foods">Foods</a>
               </li>
               <li class="nav-item">
                  <a class="nav-link fw-semibold text-dark px-3" href="#hotels">Hotels</a>
               </li>
            </ul>
            <div>
               <button class="btn btn-outline-primary rounded-pill px-4 me-2" data-bs-toggle="modal"
                  data-bs-target="#loginModal">Login</button>
               <button class="btn btn-primary rounded-pill px-4" data-bs-toggle="modal"
                  data-bs-target="#signupModal">Sign Up</button>
            </div>
         </div>
      </div>
   </nav>

   <!-- Hero Section -->
   <section class="bg-light" id="home"
      style="background: linear-gradient(135deg, rgba(255, 71, 87, 0.1) 0%, rgba(255, 107, 129, 0.1) 100%);">
      <div class="container py-5 mb-5">
         <div class="row align-items-center">
            <div class="col-lg-6 mb-4 mb-lg-0">
               <h1 class="fw-bold display-4 text-dark mb-3">Delicious Food<br>Delivered To You</h1>
               <p class="fs-5 text-secondary mb-4">Choose from thousands of restaurants and get your favorite food
                  delivered to your doorstep.</p>
               <button class="btn btn-primary btn-lg" onclick="window.location.href='/user/home'">Order Now</button>
            </div>
            <div class="col-lg-6">
               <img src="/uploads/load.jpg" alt="Hero Image" class="img-fluid rounded shadow"
                  style="border-radius: 20px;">
            </div>
         </div>
      </div>
   </section>

   <!-- Categories Section -->
   <section class="py-5" id="categories">
      <div class="container">
         <h2 class="text-center fw-bold mb-5 pb-2 position-relative">
            Popular Categories
            <span class="position-absolute bottom-0 start-50 translate-middle-x bg-danger"
               style="width: 80px; height: 3px;"></span>
         </h2>
         <div class="row">
            <!-- Top 10 Categories -->
            <% categoryOrder.forEach(element => { %>
            <div class="col-md-3 col-sm-6 mb-4">
               <div class="card text-center shadow-sm rounded-3 h-100 border-0">
                  <div class="card-body">
                     <div class="fs-2 text-danger mb-2">
                        <i class="fas fa-hamburger"></i>
                     </div>
                     <h4 class="card-title fw-bold"><%= element.categoryname %></h4>
                     <p class="text-secondary"><%= element.count %>+ items</p>
                  </div>
               </div>
            </div>
            <% }) %>
         </div>
      </div>
   </section>

   <!-- Search Section -->
   <section class="bg-danger text-white py-5 text-center" id="search">
      <div class="container">
         <h2 class="fw-bold mb-4">Search Your Favorite Food</h2>
         <div class="mx-auto" style="max-width:600px;">
            <div class="input-group">
               <input type="text" class="form-control form-control-lg rounded-pill" id="searchforFood"
                  placeholder="Search for food ...">
               <button class="btn btn-light rounded-pill px-4 ms-2" id="search">Search</button>
            </div>
         </div>
      </div>
   </section>

   <!-- Top Foods Section -->
   <section class="py-5" id="foods">
      <div class="container">
         <h2 class="text-center fw-bold mb-5 pb-2 position-relative">
            Top 10 Foods
            <span class="position-absolute bottom-0 start-50 translate-middle-x bg-danger"
               style="width: 80px; height: 3px;"></span>
         </h2>
         <div class="row">
            <% foodOrder.forEach(element => { %>
            <div class="col-md-3 col-sm-6 mb-4">
               <div class="card shadow-sm rounded-3 h-100 border-0 position-relative">
                  <span
                     class="position-absolute top-0 end-0 bg-danger text-white px-3 py-1 rounded-pill fw-bold mt-2 me-2 fs-6">Top
                     Rated</span>
                  <img src="<%= element.images %>" alt="Food" class="card-img-top"
                     style="height:200px;object-fit:cover;">
                  <div class="card-body">
                     <h4 class="card-title fw-bold"><%= element.foodname %></h4>
                  </div>
               </div>
            </div>
            <% }) %>
         </div>
      </div>
   </section>

   <!-- Top Hotels Section -->
   <section class="py-5" id="hotels">
      <div class="container">
         <h2 class="text-center fw-bold mb-5 pb-2 position-relative">
            Featured Hotels
            <span class="position-absolute bottom-0 start-50 translate-middle-x bg-danger"
               style="width: 80px; height: 3px;"></span>
         </h2>
         <div class="row">
            <% hotelOrder.forEach(element => { %>
            <div class="col-md-3 col-sm-6 mb-4">
               <div class="card shadow-sm rounded-3 h-100 border-0 position-relative">
                  <span
                     class="position-absolute top-0 end-0 bg-danger text-white px-3 py-1 rounded-pill fw-bold mt-2 me-2 fs-6">Featured</span>
                  <img src="<%= element.images %>" alt="Hotel" class="card-img-top"
                     style="height:200px;object-fit:cover;">
                  <div class="card-body">
                     <h4 class="card-title fw-bold"><%= element.hotelname %></h4>
                     <span class="text-muted small"><%= element.address %></span>
                  </div>
               </div>
            </div>
            <% }) %>
         </div>
      </div>
   </section>

   <!-- Footer -->
   <footer class="bg-dark text-white pt-5 pb-3 mt-5">
      <div class="container">
         <div class="row">
            <div class="col-md-3 mb-4 mb-md-0">
               <h5 class="fw-bold mb-3">Taste Trial</h5>
               <p>Order your favorite food from the best restaurants in town.</p>
            </div>
            <div class="col-md-3 mb-4 mb-md-0">
               <h5 class="fw-bold mb-3">Quick Links</h5>
               <ul class="list-unstyled">
                  <li><a href="#home" class="text-white-50 text-decoration-none">Home</a></li>
                  <li><a href="#categories" class="text-white-50 text-decoration-none">Categories</a></li>
                  <li><a href="#foods" class="text-white-50 text-decoration-none">Foods</a></li>
                  <li><a href="#hotels" class="text-white-50 text-decoration-none">Hotels</a></li>
               </ul>
            </div>
            <div class="col-md-3 mb-4 mb-md-0">
               <h5 class="fw-bold mb-3">Contact Us</h5>
               <ul class="list-unstyled">
                  <li><i class="fas fa-phone me-2"></i> +1234567890</li>
                  <li><i class="fas fa-envelope me-2"></i> info@foodiehub.com</li>
                  <li><i class="fas fa-map-marker-alt me-2"></i> 123 Street, City</li>
               </ul>
            </div>
            <div class="col-md-3">
               <h5 class="fw-bold mb-3">Follow Us</h5>
               <div class="d-flex gap-3">
                  <a href="#" class="text-white"><i class="fab fa-facebook fa-lg"></i></a>
                  <a href="#" class="text-white"><i class="fab fa-twitter fa-lg"></i></a>
                  <a href="#" class="text-white"><i class="fab fa-instagram fa-lg"></i></a>
                  <a href="#" class="text-white"><i class="fab fa-youtube fa-lg"></i></a>
               </div>
            </div>
         </div>
         <hr class="border-light">
         <div class="text-center">
            <p class="mb-0 text-white-50">&copy; 2025 FoodieHub. All rights reserved.</p>
         </div>
      </div>
   </footer>

   <!-- Scroll to Top Button -->
   <button
      class="btn bg-danger text-white rounded-circle shadow-sm position-fixed d-flex align-items-center justify-content-center"
      style="bottom: 20px; right: 20px; width: 40px; height: 40px; display: none;" id="scrollTopBtn">
      <i class="fas fa-arrow-up"></i>
   </button>

   <!-- Login Modal -->
   <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
         <div class="modal-content border-0 shadow-lg rounded-4">
            <div class="modal-header border-0 pb-0 justify-content-center">
               <span class="d-flex align-items-center justify-content-center rounded-circle bg-primary mb-2"
                  style="width:80px;height:80px;">
                  <i class="fa fa-user fa-2x text-white"></i>
               </span>
            </div>
            <div class="modal-body pt-0">
               <form id="loginForm" autocomplete="off">
                  <p class="text-center text-danger" id="existUser"></p>
                  <input type="text" style="display:none;" autocomplete="username">
                  <input type="password" style="display:none;" autocomplete="current-password">
                  <div class="mb-3">
                     <input type="text" id="logemail" class="form-control form-control-lg rounded-pill"
                        placeholder="User Email" name="email" autocomplete="off">
                     <small id="logemailError" class="text-danger d-block mt-1"></small>
                  </div>
                  <div class="mb-3 position-relative">
                     <input type="password" id="logpassword" class="form-control form-control-lg rounded-pill pe-5"
                        placeholder="Password" name="password" autocomplete="off">
                     <button type="button"
                        class="btn position-absolute top-50 end-0 translate-middle-y me-3 p-0 border-0 bg-transparent"
                        id="togglePassword" tabindex="-1" aria-label="Show password" style="height: 2rem;">
                        <i class="fa fa-eye-slash text-secondary fs-5"></i>
                     </button>
                     <small id="logpasswordError" class="text-danger d-block mt-1"></small>
                  </div>

                  <div class="mb-3 text-end">
                     <a href="/user/emailverification" class="small text-decoration-none text-primary">Forgot
                        Password?</a>
                  </div>
                  <div class="d-grid mb-3">
                     <button type="submit" class="btn btn-primary btn-lg rounded-pill fw-bold"
                        id="liveToastBtn">Login</button>
                  </div>
                  <div class="text-center mb-3">
                     <span class="text-muted">Or</span>
                  </div>
                  <div class="d-grid">
                     <button type="button" class="btn btn-danger btn-lg rounded-pill fw-bold"
                        onclick="location.href='/user/auth/google'">
                        <i class="fab fa-google me-2"></i> Login with Google
                     </button>
                  </div>
               </form>
            </div>
         </div>
      </div>
   </div>


   <!-- Signup Modal -->
   <div class="modal fade" id="signupModal" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
         <div class="modal-content border-0 shadow-lg rounded-4">
            <div class="modal-header border-0 pb-0 justify-content-center">
               <span class="d-flex align-items-center justify-content-center rounded-circle mb-2 bg-primary "
                  style="width:80px;height:80px">
                  <i class="fa fa-user fa-2x text-white"></i>
               </span>
            </div>
            <div class="modal-body pt-0">
               <form id="signUpform" autocomplete="off">
                  <p class="text-danger text-center" id="noMatch"></p>
                  <!-- Hidden fields for autocomplete fix -->
                  <input type="text" style="display:none;" autocomplete="username">
                  <input type="password" style="display:none;" autocomplete="current-password">
                  <div class="mb-3">
                     <input type="text" class="form-control form-control-lg rounded-pill" placeholder="First Name"
                        name="firstname" id="firstname">
                     <small class="text-danger d-block mt-1" id="firsterror"></small>
                  </div>
                  <div class="mb-3">
                     <input type="text" class="form-control form-control-lg rounded-pill" placeholder="Last Name"
                        name="lastname" id="lastname">
                     <small class="text-danger d-block mt-1" id="lasterror"></small>
                  </div>
                  <div class="mb-3">
                     <input type="text" class="form-control form-control-lg rounded-pill" placeholder="Phone Number"
                        name="phonenumber" id="phonenumber">
                     <small class="text-danger d-block mt-1" id="phoneError"></small>
                  </div>
                  <div class="mb-3">
                     <input type="email" class="form-control form-control-lg rounded-pill" placeholder="Email Address"
                        name="email" id="email">
                     <small class="text-danger d-block mt-1" id="emailError"></small>
                  </div>
                  <div class="mb-3 position-relative">
                     <input type="password" class="form-control form-control-lg rounded-pill pe-5"
                        placeholder="Enter Password" name="password" id="password">
                     <span id="togglePassword" class="position-absolute top-50 end-0 translate-middle-y me-3"
                        style="cursor:pointer;">
                        <i class="fa fa-eye-slash text-secondary"></i>
                     </span>
                     <small class="text-danger d-block mt-1" id="passwordError"></small>
                  </div>
                  <div class="mb-3">
                     <input type="password" class="form-control form-control-lg rounded-pill"
                        placeholder="Confirm Password" name="confirmpassword" id="confirmpassword">
                     <small class="text-danger d-block mt-1" id="confirmpasswordError"></small>
                  </div>
                  <div class="d-grid">
                     <button type="submit" class="btn btn-primary btn-lg rounded-pill shadow-sm fw-bold">Generate
                        OTP</button>
                  </div>
               </form>
            </div>
         </div>
      </div>
   </div>


   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

   <% if (successsavemessage && successsavemessage.length>0) { %>
   <script>Swal.fire({ title: "<%= successsavemessage %>", icon: "success" });</script>
   <% } %>
   <% if (notExist && notExist.length>0) { %>
   <script>Swal.fire({ title: "<%= notExist %>", icon: "error" });</script>
   <% } %>
   <script>
      // Scroll to Top Button
      const scrollTopBtn = document.getElementById('scrollTopBtn');
      window.addEventListener('scroll', () => {
         if (window.pageYOffset > 200) scrollTopBtn.style.display = 'flex';
         else scrollTopBtn.style.display = 'none';
      });
      scrollTopBtn.addEventListener('click', () => {
         window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // Smooth Scroll for Navigation Links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
         anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
               target.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
         });
      });

      // Password Toggle
      document.getElementById("togglePassword").addEventListener("click", function () {
         let passwordInput = document.getElementById("password");
         let icon = this.querySelector("i");
         if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
         } else {
            passwordInput.type = "password";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
         }
      });

      // Login Form AJAX
      document.getElementById('loginForm').addEventListener('submit', async function (e) {
         e.preventDefault();
         document.getElementById('logemailError').textContent = '';
         document.getElementById('logpasswordError').textContent = '';
         document.getElementById('existUser').textContent = '';
         const loginEmail = document.getElementById('logemail').value;
         const loginPassword = document.getElementById('logpassword').value;

         const response = await fetch('/user/login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email: loginEmail, password: loginPassword })
         });
         const data = await response.json();
         if (data.messageEmail) document.getElementById('logemailError').textContent = data.messageEmail;
         if (data.messagePassword) document.getElementById('logpasswordError').textContent = data.messagePassword;
         if (data.existMessage) document.getElementById('existUser').textContent = data.existMessage;
         if (data.successMessage) {
            Swal.fire({ title: data.successMessage, icon: "success", draggable: true }).then((result) => {
               if (result.isConfirmed) window.location.href = "/user/home";
            });
         }
      });

      // Signup Form AJAX
      document.getElementById('signUpform').addEventListener('submit', async function (event) {
         event.preventDefault();
         document.getElementById('confirmpasswordError').innerText = "";
         document.getElementById("emailError").innerText = "";
         document.getElementById("passwordError").innerText = "";
         document.getElementById("phoneError").innerText = "";
         document.getElementById("lasterror").innerText = "";
         document.getElementById("firsterror").innerText = "";
         document.getElementById('noMatch').innerText = "";
         const firstName = document.getElementById('firstname').value;
         const lastName = document.getElementById('lastname').value;
         const email = document.getElementById('email').value;
         const phonenumber = document.getElementById('phonenumber').value;
         const password = document.getElementById('password').value;
         const confirmPassword = document.getElementById('confirmpassword').value;
         const response = await fetch('/user/verifyOTP', {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
               firstName: firstName, lastName: lastName, email: email, phonenumber: phonenumber, password: password, confirmPassword: confirmPassword
            })
         });
         const data = await response.json();
         if (data.noFirst) document.getElementById("firsterror").innerText = data.noFirst;
         if (data.noLast) document.getElementById("lasterror").innerText = data.noLast;
         if (data.nophone) document.getElementById("phoneError").innerText = data.nophone;
         if (data.nopassword) document.getElementById("passwordError").innerText = data.nopassword;
         if (data.noemail) document.getElementById("emailError").innerText = data.noemail;
         if (data.noconfirm) document.getElementById('confirmpasswordError').innerText = data.noconfirm;
         if (data.nomatch) document.getElementById('noMatch').innerText = data.nomatch;
         if (data.condition) document.getElementById('noMatch').innerText = data.condition;
         if (data.conditionPhone) document.getElementById("phoneError").innerText = data.conditionPhone;
         if (data.exist) document.getElementById('noMatch').innerText = data.exist;
         if (data.redirect) { window.location.href = data.redirect; return; }
      });

      // Search
      document.getElementById('search').addEventListener('click', async function () {
         const searchforFood = document.getElementById('searchforFood').value;
         window.location.href = `/user/load?search=${ searchforFood }`;
      });

      //login password hide function
      document.getElementById("togglePassword").addEventListener("click", function () {
         const passwordInput = document.getElementById("logpassword");
         const icon = this.querySelector("i");
         if (passwordInput.type === "password") {
            passwordInput.type = "text";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
         } else {
            passwordInput.type = "password";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
         }
      });


   </script>
</body>

</html>